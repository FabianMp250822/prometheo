
export const lifeExpectancyData: { [age: number]: { exphombre: number; expmujer: number } } = {
    15: { exphombre: 62.2, expmujer: 68.5 },
    16: { exphombre: 61.2, expmujer: 67.5 },
    17: { exphombre: 60.3, expmujer: 66.5 },
    18: { exphombre: 59.4, expmujer: 65.5 },
    19: { exphombre: 58.4, expmujer: 64.5 },
    20: { exphombre: 57.5, expmujer: 63.6 },
    21: { exphombre: 56.6, expmujer: 62.6 },
    22: { exphombre: 55.6, expmujer: 61.6 },
    23: { exphombre: 54.7, expmujer: 60.6 },
    24: { exphombre: 53.8, expmujer: 59.6 },
    25: { exphombre: 52.9, expmujer: 58.7 },
    26: { exphombre: 51.9, expmujer: 57.7 },
    27: { exphombre: 51.0, expmujer: 56.7 },
    28: { exphombre: 50.1, expmujer: 55.7 },
    29: { exphombre: 49.1, expmujer: 54.8 },
    30: { exphombre: 48.2, expmujer: 53.8 },
    31: { exphombre: 47.3, expmujer: 52.8 },
    32: { exphombre: 46.3, expmujer: 51.9 },
    33: { exphombre: 45.4, expmujer: 50.9 },
    34: { exphombre: 44.5, expmujer: 49.9 },
    35: { exphombre: 43.6, expmujer: 49.0 },
    36: { exphombre: 42.6, expmujer: 48.0 },
    37: { exphombre: 41.7, expmujer: 47.0 },
    38: { exphombre: 40.8, expmujer: 46.1 },
    39: { exphombre: 39.9, expmujer: 45.1 },
    40: { exphombre: 38.9, expmujer: 44.1 },
    41: { exphombre: 38.0, expmujer: 43.2 },
    42: { exphombre: 37.1, expmujer: 42.2 },
    43: { exphombre: 36.2, expmujer: 41.3 },
    44: { exphombre: 35.3, expmujer: 40.3 },
    45: { exphombre: 34.4, expmujer: 39.4 },
    46: { exphombre: 33.5, expmujer: 38.4 },
    47: { exphombre: 32.6, expmujer: 37.5 },
    48: { exphombre: 31.7, expmujer: 36.6 },
    49: { exphombre: 30.8, expmujer: 35.6 },
    50: { exphombre: 29.9, expmujer: 34.7 },
    51: { exphombre: 29.0, expmujer: 33.8 },
    52: { exphombre: 28.2, expmujer: 32.9 },
    53: { exphombre: 27.3, expmujer: 31.9 },
    54: { exphombre: 26.4, expmujer: 31.0 },
    55: { exphombre: 25.6, expmujer: 30.1 },
    56: { exphombre: 24.7, expmujer: 29.2 },
    57: { exphombre: 23.9, expmujer: 28.3 },
    58: { exphombre: 23.1, expmujer: 27.4 },
    59: { exphombre: 22.3, expmujer: 26.6 },
    60: { exphombre: 21.5, expmujer: 25.7 },
    61: { exphombre: 20.7, expmujer: 24.8 },
    62: { exphombre: 19.9, expmujer: 23.9 },
    63: { exphombre: 19.1, expmujer: 23.1 },
    64: { exphombre: 18.3, expmujer: 22.2 },
    65: { exphombre: 17.6, expmujer: 21.4 },
    66: { exphombre: 16.8, expmujer: 20.6 },
    67: { exphombre: 16.1, expmujer: 19.8 },
    68: { exphombre: 15.4, expmujer: 19.0 },
    69: { exphombre: 14.7, expmujer: 18.2 },
    70: { exphombre: 14.1, expmujer: 17.4 },
    71: { exphombre: 13.4, expmujer: 16.6 },
    72: { exphombre: 12.8, expmujer: 15.9 },
    73: { exphombre: 12.2, expmujer: 15.2 },
    74: { exphombre: 11.6, expmujer: 14.4 },
    75: { exphombre: 11.0, expmujer: 13.7 },
    76: { exphombre: 10.5, expmujer: 13.1 },
    77: { exphombre: 10.0, expmujer: 12.4 },
    78: { exphombre: 9.4, expmujer: 11.8 },
    79: { exphombre: 9.0, expmujer: 11.1 },
    80: { exphombre: 8.5, expmujer: 10.6 },
    81: { exphombre: 8.0, expmujer: 10.0 },
    82: { exphombre: 7.6, expmujer: 9.4 },
    83: { exphombre: 7.2, expmujer: 8.9 },
    84: { exphombre: 6.8, expmujer: 8.4 },
    85: { exphombre: 6.4, expmujer: 7.9 },
    86: { exphombre: 6.0, expmujer: 7.4 },
    87: { exphombre: 5.6, expmujer: 6.9 },
    88: { exphombre: 5.3, expmujer: 6.5 },
    89: { exphombre: 4.9, expmujer: 6.0 },
    90: { exphombre: 4.6, expmujer: 5.6 },
    91: { exphombre: 4.3, expmujer: 5.2 },
    92: { exphombre: 4.0, expmujer: 4.8 },
    93: { exphombre: 3.8, expmujer: 4.5 },
    94: { exphombre: 3.5, expmujer: 4.1 },
    95: { exphombre: 3.3, expmujer: 3.8 },
    96: { exphombre: 3.0, expmujer: 3.5 },
    97: { exphombre: 2.8, expmujer: 3.2 },
    98: { exphombre: 2.6, expmujer: 2.9 },
    99: { exphombre: 2.4, expmujer: 2.7 },
    100: { exphombre: 2.2, expmujer: 2.5 },
    101: { exphombre: 2.0, expmujer: 2.2 },
    102: { exphombre: 1.8, expmujer: 2.0 },
    103: { exphombre: 1.7, expmujer: 1.8 },
    104: { exphombre: 1.5, expmujer: 1.7 },
    105: { exphombre: 1.4, expmujer: 1.5 },
    106: { exphombre: 1.3, expmujer: 1.3 },
    107: { exphombre: 1.1, expmujer: 1.2 },
    108: { exphombre: 1.0, expmujer: 1.0 },
    109: { exphombre: 0.8, expmujer: 0.8 },
    110: { exphombre: 0.5, expmujer: 0.5 },
};

/**
 * Calculates the age and remaining life expectancy based on a birth date.
 * @param birthDate - The birth date of the person.
 * @param gender - The gender of the person ('male' or 'female').
 * @returns An object containing the current age and life expectancy.
 */
export function getLifeExpectancyInfo(birthDate: Date, gender: 'male' | 'female'): { age: number; expectancy: number | null } {
    if (!(birthDate instanceof Date) || isNaN(birthDate.getTime())) {
        return { age: 0, expectancy: null };
    }

    const today = new Date();
    let age = today.getFullYear() - birthDate.getFullYear();
    const m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }

    const expectancyData = lifeExpectancyData[age];
    if (!expectancyData) {
        return { age, expectancy: null };
    }

    const expectancy = gender === 'male' ? expectancyData.exphombre : expectancyData.expmujer;
    return { age, expectancy };
}
